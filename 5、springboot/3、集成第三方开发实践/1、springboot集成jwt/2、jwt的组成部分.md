## jwt的组成部分



#### 1、总述组成部分

JWT 由三部分组成，以 . 分割：

1. Header
2. Payload
3. Signature

JWT 最终看起来是这样子：

```text
xxxxx.yyyyy.zzzzz
```





#### 组成部分详述

- Header部分

  包含了令牌的元数据，并且包含签名和/或加密算法的类型，如下所示

  ```json
  { 
    "alg": "HS256”,     #加密的算法为 HMAC SHA256。
    "typ": “JWT”         #typ一般都是固定的jwt
  }
  ```

  `alg`是指定加密的算法，`typ`是指定token的类型。

  

  扩展加密算法种类：

  1. MD5
  1. SHA：数字签名等密码学应用中重要的工具，安全性高于MD5
  1. HMAC：基于密钥的Hash算法的认证协议。用公开函数和密钥产生一个固定长度的值作为认证标识，用这个标识鉴别消息的完整性。**常用于接口签名验证**

- Payload部分

  存放有效信息的地方，包含三个部分：jwt标准声明、公共声明、私有声明

  1. 标准声明（建议但不强制使用），包括如下关键字

     iss: jwt签发者

​              sub: 面向的用户(jwt所面向的用户)

​              aud: 接收jwt的一方

​              exp: 过期时间戳(jwt的过期时间，这个过期时间必须要大于签发时间)

​              nbf: 定义在什么时间之前，该jwt都是不可用的.

​              iat: jwt的签发时间

​              jti: jwt的唯一身份标识，主要用来作为一次性token,从而回避重放攻击。



​		 2. 公共声明

​				公共的声明可以添加任何的信息，一般添加用户的相关信息或其他业务需要的必要信息.但不建议添加敏感信息，因为该部分在客户端可解密.

​		 3. 私有声明

​				私有声明是提供者和消费者所共同定义的声明，一般不建议存放敏感信息，因为base64是对称解密的，意味着该部分信息可以归类为明文信息。



- Signature 签名部分

  这个部分需要base64加密后的header和base64加密后的payload使用”.“连接组成的字符串，然后通过header中声明的加密方式进行加盐secret组合加密，然后就构成了jwt的第三部分。密钥secret是保存在服务端的，服务端会根据这个密钥进行生成token和进行验证，所以需要保护好。

  