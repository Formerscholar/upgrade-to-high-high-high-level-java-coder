## 双写一致



#### 1、产生场景

保证redis和mysql在数据层面的一致性，比如有一件商品，mysql和redis中的库存量是6，此时有一个客户买走一件，那么需要更新mysql中的库存量为5，同时也需要更新redis中的库存量为5，但是在更新redis的库存量为5的时候，也有大量的用户正在访问redis，我们需要确保尽量少的用户读取到redis中的库存量为6，大量的用户读取到的应该是5。



但是，没有绝对的双写一致！因为还有一小部分用户读取到的是6。



#### 2、双写一致的概念

就是确保写入到redis和mysql中的数据的一致性，但是要在最短的时间内！



#### 3、解决方案

一般使用延时双删的策略。

或中间件canal中间件





