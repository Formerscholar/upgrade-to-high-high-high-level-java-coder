## i确认需求及分析需求



#### 1、提出需求

要做一个商城的搜索功能，类似京东，如下图

![avatar](../images/WechatIMG486.jpeg)



#### 2、需求分析

根据上面的图片，分析，商品搜索的条件有：

1. 商品名称搜索
2. 价格搜索
3. 销量搜索
4. 评论数搜索
5. 各种规格的搜索，机身内存、运行内存、CPU型号、屏幕尺寸、电池容量等等

![avatar](../images/WechatIMG487.jpeg)



搜索步骤：

1. 当用户输入商品名称进行搜索，根据商品名称到es中查询数据，将查询到的商品列出来，在es中查询的时候需要根据”机身内存“、”运行内存“、”CPU型号“、”屏幕尺寸“等做聚合查询才能得到”机身内存“、”运行内存“、”CPU型号“、”屏幕尺寸“等的所有规格，才能做规格查询。
2. 当用户点击”销量“、”评论数“、”价格“等按钮，会根据商品名称到es中查询，并且带着”销量“、”评论数“、”价格“到查询中做为排序条件，将查询到的商品列出来，在es中查询的时候需要根据”机身内存“、”运行内存“、”CPU型号“、”屏幕尺寸“等做聚合查询才能得到”机身内存“、”运行内存“、”CPU型号“、”屏幕尺寸“等的所有规格，才能做规格查询。
3. 当用户点击各种规格按钮，会根据商品名称和商品规格到es中做”and“查询，将查询到的商品列出来，在es中查询的时候需要根据”机身内存“、”运行内存“、”CPU型号“、”屏幕尺寸“等做聚合查询才能得到”机身内存“、”运行内存“、”CPU型号“、”屏幕尺寸“等的所有规格，才能做规格查询。