(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f4f8f20","chunk-2d0c4faa"],{"19bd":function(e,t,a){},3808:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"leftSpan"}),a("span",{staticClass:"rightSpan"},[e._v(e._s(e.title))])])},i=[],r={components:{},props:{title:{type:String,default:"标题"}},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},o=r,s=(a("7e93"),a("e607")),l=Object(s["a"])(o,n,i,!1,null,"7f67c1ca",null);t["a"]=l.exports},"3cae":function(e,t,a){"use strict";a.r(t),a.d(t,"getNoticeList",(function(){return i})),a.d(t,"editNotice",(function(){return r})),a.d(t,"getNoticeRecordList",(function(){return o}));var n=a("b775");function i(e){return Object(n["a"])({url:"parking/notifyTemplate/list",method:"get",params:e})}function r(e){return Object(n["a"])({url:"parking/notifyTemplate/edit",method:"post",data:e})}function o(e){return Object(n["a"])({url:"parking/notificationRecord/list",method:"get",params:e})}},"59da":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"noticeList"},[a("div",{staticClass:"noticeBox",staticStyle:{width:"100%"}},[a("titleTab",{attrs:{title:"查询条件"}}),a("el-form",{ref:"queryForm",staticClass:"searchBox",attrs:{model:e.queryForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"消息类型：",prop:"sendTime"}},[a("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择消息类型",clearable:""},model:{value:e.queryForm.sendTime,callback:function(t){e.$set(e.queryForm,"sendTime",t)},expression:"queryForm.sendTime"}},e._l(e.dict.type.notice_type,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"推送时间：",prop:"time"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.queryForm.time,callback:function(t){e.$set(e.queryForm,"time",t)},expression:"queryForm.time"}})],1),a("el-form-item",{attrs:{label:"接收人：",prop:"userPhone"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入接收人手机号",clearable:""},model:{value:e.queryForm.userPhone,callback:function(t){e.$set(e.queryForm,"userPhone",t)},expression:"queryForm.userPhone"}})],1),a("el-form-item",{staticStyle:{"margin-left":"30px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("titleTab",{attrs:{title:"消息记录"}}),a("div",{staticClass:"importDiv"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleExport}},[e._v("导出所有")])],1),a("div",{staticClass:"tableBox"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"消息类型","min-width":"160",align:"center",prop:"sendTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.showDictLabel(e.dict.type.notice_type,t.row.sendTime))+" ")]}}])}),a("el-table-column",{attrs:{label:"推送时间","min-width":"220",align:"center",prop:"notifyTime"}}),a("el-table-column",{attrs:{label:"接收人","min-width":"160",align:"center",prop:"userPhone"}}),a("el-table-column",{attrs:{label:"消息内容","min-width":"320",align:"center",prop:"comment"}}),a("el-table-column",{attrs:{label:"推送状态","min-width":"120",align:"center",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"statusDiv"},[a("span",{class:1==t.row.status?"statusDotGreen":0==t.row.status?"statusDotYellow":"statusDotRed"}),a("span",{staticClass:"statusCon"},[e._v(e._s(1==t.row.status?"成功":0==t.row.status?"未响应":"失败"))])])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.pageInfo.total>0,expression:"pageInfo.total > 0"}],attrs:{total:e.pageInfo.total,page:e.pageInfo.pageNum,limit:e.pageInfo.pageSize},on:{"update:page":function(t){return e.$set(e.pageInfo,"pageNum",t)},"update:limit":function(t){return e.$set(e.pageInfo,"pageSize",t)},pagination:e.getList}})],1)],1)])},i=[],r=a("3600"),o=a("1c61"),s=(a("2fcd"),a("f721"),a("3808")),l=a("3cae"),c={name:"noticeList",components:{titleTab:s["a"]},dicts:["notice_type"],props:{},data:function(){return{labelPosition:"right",queryForm:{sendTime:"",time:[],userPhone:""},tableData:[],pageInfo:{total:0,pageSize:10,pageNum:1},loading:!1}},computed:{},watch:{},methods:{showDictLabel:function(e,t){var a;return(null===(a=e.find((function(e){return e.value==t})))||void 0===a?void 0:a.label)||"--"},getList:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a,n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,a={pageSize:e.pageInfo.pageSize,pageNum:e.pageInfo.pageNum,sendTime:e.queryForm.sendTime,startTime:e.queryForm.time[0],endTime:e.queryForm.time[1],userPhone:e.queryForm.userPhone},t.next=4,Object(l["getNoticeRecordList"])(a);case 4:n=t.sent,200==n.code&&(e.loading=!1,e.tableData=n.rows,e.pageInfo.total=n.total);case 6:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.pageInfo.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleExport:function(){this.download("parking/notificationRecord/export",{sendTime:this.queryForm.sendTime,startTime:this.queryForm.time[0],endTime:this.queryForm.time[1],userPhone:this.queryForm.userPhone},"notice_".concat((new Date).getTime(),".xlsx"))}},created:function(){},mounted:function(){this.getList()}},u=c,m=(a("7917"),a("e607")),p=Object(m["a"])(u,n,i,!1,null,"d3f0fe80",null);t["default"]=p.exports},7917:function(e,t,a){"use strict";a("9f29")},"7e93":function(e,t,a){"use strict";a("19bd")},"9f29":function(e,t,a){}}]);