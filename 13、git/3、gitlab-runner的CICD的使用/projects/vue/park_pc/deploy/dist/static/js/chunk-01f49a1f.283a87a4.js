(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01f49a1f","chunk-2d0aacba","chunk-2d0c4285"],{"0b6d":function(t,e,a){},1313:function(t,e,a){"use strict";a.r(e),a.d(e,"listMonitor",(function(){return i})),a.d(e,"getField",(function(){return n})),a.d(e,"addEntryInfo",(function(){return o})),a.d(e,"updateEnterTime",(function(){return s})),a.d(e,"editParkingSpace",(function(){return c})),a.d(e,"editEnterCarNo",(function(){return l})),a.d(e,"editExitCarNo",(function(){return u}));var r=a("b775");function i(t){return Object(r["a"])({url:"/passageMonitor/list",method:"get",params:t})}function n(t){return Object(r["a"])({url:"/bField/"+t,method:"get"})}function o(t){return Object(r["a"])({url:"/passageMonitor",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/passageMonitor/editEntryTime",method:"put",data:t})}function c(t){return Object(r["a"])({url:"/passageMonitor/editParkingSpace",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/passageMonitor/editEntryCarNumber",method:"put",data:t})}function u(t){return Object(r["a"])({url:"/passageMonitor/editExitCarNumber",method:"put",data:t})}},"2a88":function(t,e,a){"use strict";a("0b6d")},"3a45":function(t,e,a){"use strict";a.r(e);var r=a("23c5"),i=a.n(r),n="ws://100.64.0.3:8080";function o(t,e){var a=n+"/websocket/Entry/"+t;console.log("wsUri",a),this.socket=new WebSocket(a),this.socket.onerror=s,this.socket.onmessage=e,this.socket.onclose=c}function s(t){i.a.Notification({title:"",message:"WebSocket连接发生错误"+t,type:"error",duration:0})}function c(){this.socket.close(),this.socket.onclose=function(t){console.log(t),console.log("关闭")}}e["default"]={initWebSocket:o,closeWebsocket:c}},"644f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"entrance-card"},[a("div",{staticClass:"box-title",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.entranceName))]),a("span",{staticStyle:{float:"right",padding:"3px 0"}},[t._v(" 停留 "),a("span",{staticStyle:{color:"#34A400"}},[t._v(t._s(t.waitTime)+"秒")])])]),a("div",{staticClass:"box-content"},[a("div",{staticStyle:{display:"flex"}},[a("img",{staticClass:"car-photo",attrs:{src:"https://lanhu.oss-cn-beijing.aliyuncs.com/SketchPng97ba621144b4bd71e625be52c485487b4a517215628bb532444afff95679ba77"}}),a("el-form",{staticStyle:{"margin-left":"8px",flex:"1"},attrs:{size:"mini"}},[a("el-form-item",{attrs:{label:"车牌号"}},[a("span",{staticClass:"fw-600"},[t._v(t._s(t.displayInfo.carNo))]),a("span",{staticClass:"fw-600",staticStyle:{"margin-left":"20px"}},[t._v("临时车")])]),a("el-form-item",{attrs:{label:"入场通道"}},[a("span",{staticClass:"fw-600 w-130"},[t._v(t._s(t.entranceName))])]),a("el-form-item",{attrs:{label:"入场时间"}},[a("span",{staticClass:"fw-600 w-130"},[t._v(t._s(t.displayInfo.entryTime))])]),a("el-form-item",[a("el-button",{attrs:{type:"info",disabled:""}},[t._v("修改车牌")]),a("el-button",{attrs:{type:"primary",disabled:""}},[t._v("重拍")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showEdit=!0}}},[t._v("补录")])],1),a("el-form-item",{staticClass:"form-footer"},[a("img",{staticClass:"no-photo",attrs:{src:"https://lanhu.oss-cn-beijing.aliyuncs.com/SketchPng169f80afb3d9051e985f4248535fab682f25758e6f412908dd642ebc683aa684"}}),a("el-button",{staticClass:"open-btn",attrs:{type:"warning",size:"medium"}},[t._v("开闸")])],1)],1)],1),a("el-table",{staticStyle:{"margin-top":"4px"},attrs:{data:t.tableList,size:"mini"}},[a("el-table-column",{attrs:{prop:"carNo",label:"车 牌",align:"center"}}),a("el-table-column",{attrs:{prop:"entryTime",label:"入场时间",align:"center"}}),a("el-table-column",{attrs:{prop:"isOpen",label:"是否开闸",align:"center"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}})],1)],1),a("el-dialog",{attrs:{title:"补录进场信息",visible:t.showEdit,width:"500px"},on:{"update:visible":function(e){t.showEdit=e}}},[a("div",{staticStyle:{padding:"0 15%"}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"车牌号",prop:"carNumber"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:t.form.carNumber,callback:function(e){t.$set(t.form,"carNumber",e)},expression:"form.carNumber"}})],1),a("el-form-item",{attrs:{label:"进场时间",prop:"entryTime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.form.entryTime,callback:function(e){t.$set(t.form,"entryTime",e)},expression:"form.entryTime"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:t.loadingSubmit},on:{click:t.submitForm}},[t._v("确 定")]),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)])],1)},i=[],n=a("46fc"),o=a("1313"),s=a("3a45"),c={props:{info:{type:Object,default:function(){}}},data:function(){return{entranceName:this.$props.info.passageName,waitTime:0,displayInfo:{carNo:"苏D072G8",entryTime:"2023-02-22 11:18:23"},tableList:[{carNo:"苏D072G8",entryTime:"2023-02-22 12:56:23",isOpen:"已开闸",remark:"临时车_摄像机开闸"},{carNo:"苏D072G8",entryTime:"2023-02-22 12:56:23",isOpen:"已开闸",remark:"临时车_摄像机开闸"},{carNo:"苏D072G8",entryTime:"2023-02-22 12:56:23",isOpen:"已开闸",remark:"临时车_摄像机开闸"}],showEdit:!1,loadingSubmit:!1,form:Object(n["a"])(Object(n["a"])({},this.$props.info),{},{carNumber:void 0,entryTime:void 0}),rules:{carNumber:[{required:!0,message:"车牌不能为空",trigger:"blur"}],entryTime:[{required:!0,message:"请选择进场时间",trigger:"blur"}]}}},created:function(){s["default"].initWebSocket(this.info.passageNo,this.getMessage)},destroyed:function(){s["default"].closeWebsocket()},methods:{initForm:function(){this.form=Object(n["a"])(Object(n["a"])({},this.$props.info),{},{carNumber:void 0,entryTime:void 0})},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&Object(o["addEntryInfo"])(t.form).then((function(e){t.$modal.msgSuccess("新增成功"),t.showEdit=!1,t.initForm()}))}))},cancel:function(){this.showEdit=!1,this.initForm()},getMessage:function(t){console.log("getMessage",t);var e=JSON.parse(t.data),a=e.data,r=a.carNo,i=a.entryTime;this.displayInfo={carNo:r,entryTime:i}}}},l=c,u=(a("2a88"),a("e607")),m=Object(u["a"])(l,r,i,!1,null,"65d4f05e",null);e["default"]=m.exports}}]);